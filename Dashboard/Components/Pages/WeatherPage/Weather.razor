@page "/weather"
@using Dashboard.Services
@inject WeatherApiService WeatherApiService

@if (weatherData != null)
{
    <div class="weather-card">
        <h2><strong>@weatherData.City</strong></h2>
        <img src="@weatherData.IconUrl" alt="Weather Icon" />
        <div class="weather-info">
            <p class="temperature">Temperature: @weatherData.RoundedTemperature &deg;C</p>
            <p><strong>Weather:</strong> @weatherData.WeatherMain</p>
            <p><strong>Description:</strong> @weatherData.WeatherDescription</p>
            <p><strong>Humidity:</strong> @weatherData.Humidity %</p>
            <p><strong>Wind Speed:</strong> @weatherData.WindSpeed m/s</p>
            <p><strong>Timestamp:</strong> @weatherData.Timestamp</p>
        </div>
    </div>
}
else if (loading)
{
    <p>Loading...</p>
}
else
{
    <p>No data available. Please try again later.</p>
}

@code {
    private WeatherData weatherData;
    private bool loading;
    private string city = "Copenhagen";

    protected override async Task OnInitializedAsync()
    {
        await FetchWeather();
    }

    private async Task FetchWeather()
    {
        loading = true;
        weatherData = await WeatherApiService.GetWeatherAsync(city);
        loading = false;
    }
}
